<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_script">
    <sys_transform_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <map display_value="Import Computer Skanska UK">1acda4e31b748010445f3150cd4bcb16</map>
        <order>100</order>
        <script><![CDATA[(function runTransformScript(source, map, log, target /*undefined onStart*/ ) {
	
		var cmdb = new GlideRecord('cmdb_ci');
	cmdb.addEncodedQuery('serial_number='+source.u_serial+'^x_sksw_uk_itsm_scope=UK ITSM');
	cmdb.query();
	if(cmdb.getRowCount()>0){
		if (action == "insert") {
			
			ignore = true;
			target.setNewGuid(source.u_sys_id);
		}
	}else{
	
	
	var ci = new GlideRecord('cmdb_ci_computer');
	ci.addQuery('sys_id',target.ci);
	ci.query();
	if(ci.next()){
		ci.name = source.u_hostname;
		ci.x_sksw_uk_itsm_sccm_last_import_date = source.u_sccm_last_import_date;
		ci.cpu_type = source.u_cpu;
		ci.cpu_speed = source.u_cpu_speed;
		ci.ram = source.u_ram;
		ci.os_version = source.u_operating_system;
		ci.os_service_pack = source.u_service_pack;
		ci.ip_address = source.u_ip_address;
		ci.mac_address = source.u_mac_address;
		ci.operational_status = source.u_operational_status;
		ci.x_sksw_uk_itsm_scope = "Skanska UK";
		ci.x_sksw_uk_itsm_contract = source.u_contract_;
		ci.update();
	}}

	
	
})(source, map, log, target);]]></script>
        <sys_class_name>sys_transform_script</sys_class_name>
        <sys_created_by>erdinc.pinar@flyform.com</sys_created_by>
        <sys_created_on>2019-11-04 19:30:13</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>d54f74a31bb48010445f3150cd4bcb43</sys_id>
        <sys_mod_count>6</sys_mod_count>
        <sys_name>onAfter</sys_name>
        <sys_package display_value="UK ITSM" source="x_sksw_uk_itsm">7889315b1bd04410eb7365386e4bcbbb</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="UK ITSM">7889315b1bd04410eb7365386e4bcbbb</sys_scope>
        <sys_update_name>sys_transform_script_d54f74a31bb48010445f3150cd4bcb43</sys_update_name>
        <sys_updated_by>erdinc.pinar@flyform.com</sys_updated_by>
        <sys_updated_on>2019-11-15 16:52:24</sys_updated_on>
        <when>onAfter</when>
    </sys_transform_script>
</record_update>
