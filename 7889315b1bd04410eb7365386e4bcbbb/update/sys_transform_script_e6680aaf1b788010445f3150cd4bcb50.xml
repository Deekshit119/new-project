<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_script">
    <sys_transform_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <map display_value="Import Router Skanska UK">63f50a2f1b788010445f3150cd4bcb52</map>
        <order>100</order>
        <script><![CDATA[(function runTransformScript(source, map, log, target /*undefined onStart*/ ) {
	
		var cmdb = new GlideRecord('cmdb_ci');
	cmdb.addEncodedQuery('serial_number='+source.u_serial+'^x_sksw_uk_itsm_scope=UK ITSM');
	cmdb.query();
	if(cmdb.getRowCount()>0){
		if (action == "insert") {		
			ignore = true;
		}
	}else{
	
	var ci = new GlideRecord('cmdb_ci_ip_router');
	ci.addQuery('sys_id',target.ci);
	ci.query();
	if(ci.next()){
		ci.name = source.u_hostname;
		ci.ip_address = source.u_ip_address;
		ci.mac_address = source.u_mac_address;
		ci.operational_status = source.u_operational_status;
		ci.ports = source.u_total_ports;
		ci.x_sksw_uk_itsm_in_use_ports = source.u_in_use_ports;
		ci.x_sksw_uk_itsm_available_ports = source.u_available_ports;
		ci.x_sksw_uk_itsm_scope = "Skanska UK";
		ci.update();
	}}
	
})(source, map, log, target);]]></script>
        <sys_class_name>sys_transform_script</sys_class_name>
        <sys_created_by>erdinc.pinar@flyform.com</sys_created_by>
        <sys_created_on>2019-11-05 00:44:10</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>e6680aaf1b788010445f3150cd4bcb50</sys_id>
        <sys_mod_count>6</sys_mod_count>
        <sys_name>onAfter</sys_name>
        <sys_package display_value="UK ITSM" source="x_sksw_uk_itsm">7889315b1bd04410eb7365386e4bcbbb</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="UK ITSM">7889315b1bd04410eb7365386e4bcbbb</sys_scope>
        <sys_update_name>sys_transform_script_e6680aaf1b788010445f3150cd4bcb50</sys_update_name>
        <sys_updated_by>erdinc.pinar@flyform.com</sys_updated_by>
        <sys_updated_on>2019-11-14 00:17:40</sys_updated_on>
        <when>onAfter</when>
    </sys_transform_script>
</record_update>
